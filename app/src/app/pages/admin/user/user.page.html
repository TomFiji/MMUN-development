<ion-header>
  <ion-toolbar>
    <ion-title class="page-title" slot="start">{{ 'pages.admin.user.title' | localize }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="card-wrapper">
    <ion-card class="card">
      <ion-card-content class="card-content">
        <ion-grid (ionChange)="validateForm()" (ionBlur)="validateForm()">
          <ion-row>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.firstName' | localize}}
                </ion-label>
                <ion-input class="form-item-input" type="text" [(ngModel)]="user.firstName"
                  (ionBlur)="form.touched.firstName = true"></ion-input>
              </ion-item>
              <ion-text *ngIf="form.touched.firstName && form.errors.firstName" color="danger" class="form-item-error">
                {{form.errors.firstName | localize}}
              </ion-text>
            </ion-col>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.lastName' | localize}}
                </ion-label>
                <ion-input class="form-item-input" type="text" [(ngModel)]="user.lastName"
                  (ionBlur)="form.touched.lastName = true"></ion-input>
              </ion-item>
              <ion-text *ngIf="form.touched.lastName && form.errors.lastName" color="danger" class="form-item-error">
                {{form.errors.lastName | localize}}
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.email' | localize}}
                </ion-label>
                <ion-input class="form-item-input" type="email" [(ngModel)]="user.email"
                  (ionBlur)="form.touched.email = true"></ion-input>
              </ion-item>
              <ion-text *ngIf="form.touched.email && form.errors.email" color="danger" class="form-item-error">
                {{form.errors.email | localize}}
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.country' | localize}}
                </ion-label>
                <ion-input class="form-item-input" type="text" [(ngModel)]="user.country"
                  (ionBlur)="form.touched.country = true"></ion-input>
              </ion-item>
              <ion-text *ngIf="form.touched.country && form.errors.country" color="danger" class="form-item-error">
                {{form.errors.country | localize}}
              </ion-text>
            </ion-col>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.zipCode' | localize}}
                </ion-label>
                <ion-input class="form-item-input" type="text" [(ngModel)]="user.zipCode"
                  (ionBlur)="form.touched.zipCode = true"></ion-input>
              </ion-item>
              <ion-text *ngIf="form.touched.zipCode && form.errors.zipCode" color="danger" class="form-item-error">
                {{form.errors.zipCode | localize}}
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.number' | localize}}
                </ion-label>
                <ion-input class="form-item-input" type="text" [(ngModel)]="user.phoneNumber"
                  (ionBlur)="form.touched.phoneNumber = true"></ion-input>
              </ion-item>
              <ion-text *ngIf="form.touched.phoneNumber && form.errors.phoneNumber" color="danger" class="form-item-error">
                {{form.errors.phoneNumber | localize}}
              </ion-text>
            </ion-col>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="floating">
                  {{'core.authorType' | localize}}
                </ion-label>
                <ion-select class="form-item-input" [(ngModel)]="user.authorType" (ionBlur)="form.touched.authorType = true">
                  <ion-select-option [value]="authorType.STUDENT">
                    {{ 'core.authorType.student' |localize}}
                  </ion-select-option>
                  <ion-select-option [value]="authorType.TEACHER">
                    {{ 'core.authorType.teacher' |localize}}
                  </ion-select-option>
                  <ion-select-option [value]="authorType.ADMIN">
                    {{ 'core.authorType.admin' |localize}}
                  </ion-select-option>
                </ion-select>
              </ion-item>
              <ion-text *ngIf="form.touched.authorType && form.errors.authorType" color="danger" class="form-item-error">
                {{form.errors.authorType | localize}}
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item class="form-item visible">
                <ion-label class="form-item-label" position="floating">
                  {{'core.group' | localize}}
                </ion-label>
                <hmn-group-field class="form-item-input" type="text" [(ngModel)]="user.group"
                (onBlur)="form.touched.group = true" (onSearch)="searchGroups()" [list]="loadedGroups"></hmn-group-field>
              </ion-item>
              <ion-text *ngIf="form.touched.group && form.errors.group" color="danger" class="form-item-error">
                {{form.errors.group | localize}}
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item class="form-item">
                <ion-label class="form-item-label" position="stacked">
                  {{'core.birthDate' | localize}}
                </ion-label>
                <ion-datetime presentation="date" class="form-item-input" [(ngModel)]="user.birthDate"
                  (ionBlur)="form.touched.birthDate = true" ></ion-datetime>
              </ion-item>
              <ion-text *ngIf="form.touched.birthDate && form.errors.birthDate" color="danger" class="form-item-error">
                {{form.errors.birthDate | localize}}
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-button (click)="onSubmit()" class="form-item-submit">
                {{'pages.admin.user.update' | localize }}</ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
